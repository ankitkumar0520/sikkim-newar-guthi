<!-- Sticky header wrapper -->
<header class="sticky top-0 z-[9999] mx-auto rounded-b-xl mb-4">
  <!-- Desktop navbar with background image -->
  <div class="mx-auto hidden md:block relative">
    <nav
      class="mx-auto -mt-1 z-20 rounded-b-xl bg-[url('/assets/images/backgrounds/bg-saari.jpeg')] bg-contain bg-repeat bg-center px-4 sm:px-6 py-2 shadow-md ring-1 ring-smoky-black-100/20 flex items-center justify-between relative"
    >
      <!-- Black overlay -->
      <div class="absolute inset-0 bg-black/50 z-10 rounded-b-xl"></div>

      <!-- Content on top of overlay -->
      <div class="relative z-20 flex items-center justify-between w-full">
        <!-- Brand -->
        <a class="flex items-center gap-2" href="/">
          <img
            src="/logo.png"
            alt="SNG"
            class="h-12 w-12 rounded-full bg-white object-cover"
          />
          <span
            class="text-3xl ml-1 font-semibold tracking-[0.4rem] [text-shadow:_1px_1px_2px_red] text-white drop-shadow-[0_1px_1px_rgba(255,255,255,0.9)] transition-all duration-300 ease-in-out hover:scale-110 hover:drop-shadow-[0_2px_6px_rgba(255,255,255,0.95)] cursor-pointer"
          >
            SNG
          </span>
        </a>

        <!-- Navigation with sub-buttons -->
        <ul
          class="hidden lg:flex items-center gap-8 text-md text-white relative z-[9999]"
        >
          <ng-container *ngFor="let tab of tabs; let i = index">
            <li
              class="relative group"
              (mouseenter)="onTabHover(i)"
              (mouseleave)="onTabLeave()"
            >
              <a
                class="hover:text-blood-red-300 flex items-center gap-1 cursor-pointer px-3 py-2 rounded-md transition-all duration-200 hover:bg-white/10"
                [href]="tab.href"
              >
                {{ tab.label }}
                <lucide-angular
                  [img]="icons.ChevronDown"
                  class="w-4 h-4 transition-transform duration-200"
                  [class.rotate-180]="hoveredTab === i"
                />
              </a>

              <!-- Sub-menu dropdown -->
              <div
                *ngIf="hoveredTab === i && tab.subItems"
                class="absolute top-full left-0 mt-3 w-72 bg-white rounded-xl shadow-2xl border-2 border-blood-red-100 py-3 z-50 transform opacity-0 scale-95 group-hover:opacity-100 group-hover:scale-100 transition-all duration-200"
                (mouseenter)="onTabHover(i)"
                (mouseleave)="onTabLeave()"
              >
                <!-- Dropdown arrow -->
                <div
                  class="absolute -top-2 left-6 w-4 h-4 bg-white border-l-2 border-t-2 border-blood-red-100 transform rotate-45"
                ></div>

                <!-- Sub-items -->
                <div class="space-y-1 px-2">
                  <div
                    *ngFor="let subItem of tab.subItems; let last = last"
                    class="group/sub"
                  >
                    <a
                      [href]="subItem.href"
                      class="block px-3 py-1.5 rounded-lg hover:bg-blood-red-50 transition-all duration-200 border border-transparent hover:border-blood-red-200"
                    >
                      <div class="flex items-start gap-3">
                        <!-- Icon placeholder -->
                        <lucide-angular
                          [img]="icons.ArrowBigRightDash"
                          class="w-4 h-4 text-blood-red-400"
                        />

                        <!-- Content -->
                        <div class="flex-1">
                          <div
                            class="font-semibold text-smoky-black-900 group-hover/sub:text-blood-red-600 transition-colors"
                          >
                            {{ subItem.label }}
                          </div>
                          <div
                            *ngIf="subItem.description"
                            class="text-sm text-smoky-black-600 mt-0.5 leading-relaxed group-hover/sub:text-smoky-black-700 transition-colors"
                          >
                            {{ subItem.description }}
                          </div>
                        </div>
                      </div>
                    </a>

                    <!-- Separator line (except for last item) -->
                    <div
                      *ngIf="!last"
                      class="mx-4 h-px bg-gradient-to-r from-transparent via-blood-red-200 to-transparent"
                    ></div>
                  </div>
                </div>
              </div>
            </li>
          </ng-container>
        </ul>

        <!-- CTA + emblem -->
        <a class="hidden sm:flex items-center gap-6 shadow-xl" href="/">
          <button
            class="bg-blood-red-600 border border-white/70 hover:bg-smoky-black-500 text-white px-3 py-1.5 rounded-full flex items-center gap-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blood-red-300"
          >
            <span>Contact Us</span>
            <lucide-angular [img]="icons.User" class="w-5 h-5" />
          </button>
          <img src="/statehood.png" alt="SNG" class="h-12 w-12 object-cover" />
        </a>
      </div>
    </nav>
  </div>

  <!-- Mobile bar with background image -->
  <div class="mx-auto md:hidden">
    <nav
      class="-mt-1 flex items-center justify-between rounded-b-xl bg-[url('/assets/images/backgrounds/bg-saari.jpeg')] bg-cover bg-center px-4 py-2 text-white shadow-md relative overflow-hidden"
    >
      <!-- Black overlay for mobile -->
      <div class="absolute inset-0 bg-black/50 z-10"></div>

      <!-- Content on top of overlay -->
      <div class="relative z-20 flex items-center justify-between w-full">
        <a class="flex items-center gap-2" href="/">
          <img
            src="/logo.png"
            alt="SNG"
            class="h-11 w-11 rounded-full bg-white object-cover border border-blood-red-50"
          />
          <span
            class="text-lg ml-1 font-semibold tracking-[0.1rem] [text-shadow:_1px_1px_2px_red] text-white drop-shadow-[0_1px_1px_rgba(255,255,255,0.9)] transition-all duration-300 ease-in-out hover:scale-110 hover:drop-shadow-[0_2px_6px_rgba(255,255,255,0.95)] cursor-pointer"
          >
            SIKKIM NEWAR GUTHI
          </span>
        </a>
        <button
          *ngIf="!isSidebarOpen"
          (click)="toggleSidebar()"
          class="inline-flex items-center justify-center rounded-full px-1 py-1 hover:bg-white/15 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blood-red-300"
        >
          <lucide-angular [img]="icons.Menu" class="w-8 h-8" />
        </button>

        <button
          *ngIf="isSidebarOpen"
          (click)="toggleSidebar()"
          class="inline-flex items-center justify-center rounded-full px-1 py-1 hover:bg-white/15 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blood-red-300"
        >
          <lucide-angular [img]="icons.X" class="w-7 h-7" />
        </button>
      </div>
    </nav>
  </div>

  <!-- Slide-over sidebar (right) -->
  <div
    class="fixed inset-0 z-50 md:hidden rounded-l-xl"
    [class.pointer-events-none]="!isSidebarOpen"
  >
    <!-- Backdrop -->
    <div
      class="absolute inset-0 bg-smoky-black-900/50 transition-opacity"
      [class.opacity-0]="!isSidebarOpen"
      [class.opacity-100]="isSidebarOpen"
      (click)="toggleSidebar()"
    ></div>
    <!-- Panel -->
    <aside
      class="absolute rounded-bl-xl right-0 top-0 h-full w-80 max-w-[85vw] transform rounded-l-xl shadow-xl transition-transform duration-200 flex flex-col"
      [class.translate-x-full]="!isSidebarOpen"
      [class.translate-x-0]="isSidebarOpen"
    >
      <!-- Top Section - Fixed with Images in Row -->
      <div
        class="flex-shrink-0 bg-smoky-black-800 px-4 py-2 rounded-b-xl relative"
      >
        <!-- Images in Single Row -->
        <div class="flex justify-center items-center gap-8">
          <img
            src="/sikkim-newar.png"
            alt="Sikkim Newar"
            class="h-16 w-auto object-contain"
          />
          <img
            src="/statehood.png"
            alt="Statehood"
            class="h-14 w-auto object-contain"
          />
        </div>

        <!---Close button -->
        <div class="flex justify-end absolute top-1/2 -translate-y-1/2 right-2">
          <button
            (click)="toggleSidebar()"
            class="text-blood-red-500 bg-white rounded-full p-1 hover:text-blood-red-600 transition-colors"
          >
            <lucide-angular
              [img]="icons.X"
              class="w-6 h-6 stroke-2 stroke-current fill-current"
            />
          </button>
        </div>
      </div>

      <!-- Center Section - Scrollable with Background Image -->
      <div class="flex-1 relative overflow-auto rounded-xl">
        <!-- Background Image (only on browser) -->
        <div
          class="absolute rounded-xl inset-0 bg-[url('/assets/images/backgrounds/bg-saari.jpeg')] bg-cover bg-center opacity-40"
        ></div>

        <!-- Black Overlay for better readability -->
        <div class="absolute inset-0 bg-smoky-black-900/70"></div>

        <!-- Content Overlay -->
        <div class="relative z-10 h-full">
          <!-- Navigation Links with Collapsible Sub-items -->
          <nav class="px-4 py-4 overflow-auto">
            <div class="space-y-3">
              <ng-container *ngFor="let tab of tabs; let i = index">
                <div
                  class="rounded-xl overflow-hidden bg-smoky-black-400 backdrop-blur-sm border border-blood-red-300/30"
                >
                  <!-- Main Tab Button -->
                  <button
                    (click)="toggleTabExpansion(i)"
                    class="flex items-center justify-between w-full px-4 py-4 text-sm font-semibold text-white hover:bg-blood-red-600 hover:text-white transition-all duration-200"
                  >
                    <div class="flex items-center gap-3">
                      <lucide-angular
                        [img]="icons.Play"
                        class="w-4 h-4 text-blood-red-400"
                      />
                      <span>{{ tab.label }}</span>
                    </div>
                    <lucide-angular
                      [img]="icons.ChevronDown"
                      class="w-4 h-4 text-blood-red-400 transition-transform duration-200"
                      [class.rotate-180]="expandedTabs[i]"
                    />
                  </button>

                  <!-- Collapsible Sub-items -->
                  <div
                    *ngIf="expandedTabs[i] && tab.subItems"
                    class="border-t border-blood-red-400/30 bg-smoky-black-300"
                  >
                    <a
                      *ngFor="let subItem of tab.subItems"
                      [href]="subItem.href"
                      (click)="toggleSidebar()"
                      class="flex items-center gap-3 px-6 py-3 text-sm text-gray-200 hover:bg-blood-red-600 hover:text-white transition-colors border-b border-blood-red-400/20 last:border-b-0"
                    >
                      <lucide-angular
                        [img]="icons.ArrowBigRightDash"
                        class="w-4 h-4 text-blood-red-400"
                      />
                      <div>
                        <div class="font-medium">{{ subItem.label }}</div>
                        <div
                          *ngIf="subItem.description"
                          class="text-xs text-gray-300 mt-1"
                        >
                          {{ subItem.description }}
                        </div>
                      </div>
                    </a>
                  </div>
                </div>
              </ng-container>
            </div>
          </nav>
        </div>

        <!-- Bottom Section - Fixed with Social Media Icons Only -->
        <div
          class="sticky rounded-t-xl bottom-0 flex-shrink-0 bg-smoky-black-800 px-4 py-4 rounded-bl-xl border-t border-blood-red-300/30"
        >
          <div class="flex justify-center gap-4">
            <a
              aria-label="Facebook"
              class="p-3 rounded-full bg-smoky-black-700 hover:bg-blood-red-600 text-gray-300 hover:text-white transition-colors border border-blood-red-400/30 hover:border-blood-red-400 hover:scale-110"
              href="#"
            >
              <lucide-angular [img]="icons.Facebook" class="w-4 h-4" />
            </a>
            <a
              aria-label="Twitter"
              class="p-3 rounded-full bg-smoky-black-700 hover:bg-blood-red-600 text-gray-300 hover:text-white transition-colors border border-blood-red-400/30 hover:border-blood-red-400 hover:scale-110"
              href="#"
            >
              <lucide-angular [img]="icons.Twitter" class="w-4 h-4" />
            </a>
            <a
              aria-label="Instagram"
              class="p-3 rounded-full bg-smoky-black-700 hover:bg-blood-red-600 text-gray-300 hover:text-white transition-colors border border-blood-red-400/30 hover:border-blood-red-400 hover:scale-110"
              href="#"
            >
              <lucide-angular [img]="icons.Instagram" class="w-4 h-4" />
            </a>
            <a
              aria-label="YouTube"
              class="p-3 rounded-full bg-smoky-black-700 hover:bg-blood-red-600 text-gray-300 hover:text-white transition-colors border border-blood-red-400/30 hover:border-blood-red-400 hover:scale-110"
              href="#"
            >
              <lucide-angular [img]="icons.Youtube" class="w-4 h-4" />
            </a>
            <a
              aria-label="LinkedIn"
              class="p-3 rounded-full bg-smoky-black-700 hover:bg-blood-red-600 text-gray-300 hover:text-white transition-colors border border-blood-red-400/30 hover:border-blood-red-400 hover:scale-110"
              href="#"
            >
              <lucide-angular [img]="icons.Linkedin" class="w-4 h-4" />
            </a>
          </div>
        </div>
      </div>
    </aside>
  </div>
</header>
